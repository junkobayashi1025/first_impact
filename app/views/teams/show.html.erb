<div class="container">
  <table class="table">
    <% if current_user == @team.owner %>
    <h2>メンバー招待</h2>
    <%= form_with model: :assign, scope: :post, url: team_assigns_path(@team), local: true do |form| %>
      <%= text_field_tag :email %>
      <%= submit_tag '招待' %>
    <% end %>
    <% end %>

    <tr>
      <th><%= 'チーム名' %>:</th>
      <td><%= @team.name %></td>
    </tr>
    <tr>
      <th><%= '備考' %>:</th>
      <td><%= @team.remark %></td>
    </tr>
    <tr>
      <th><%= '責任者' %>:</th>
      <td><%= link_to "#{@team.owner.name}", user_path(@team.owner.id) %></td>
    </tr>
    <tr>
      <th><%= '担当者' %>:</th>
      <% if @team.charge_in_person.present? %>
      <td><%= link_to "#{@team.charge_in_person.name}", user_path(@team.charge_in_person.id) %></td>
      <% end %>
    </tr>
  </table>

  <h2>チームメンバー</h2>
  <ul>
    <% @team.assign_users.each do |assign_user| %>
      <li>
        <td><%= link_to "#{assign_user.name}", user_path(assign_user.id) %></td>
        <% if @team.owner == current_user && assign_user.id != @team.charge_in_person.id %>
        <td><%= link_to '削除', team_assign_path(@team, assign_user.assigns.ids), method: :delete, class: 'btn btn-sm btn-danger' %></td>
        <td><%= link_to "担当者権限", charge_in_person_team_path(@team, user_id: assign_user.id), method: :post, class: 'btn btn-sm btn-primary' %></td>
        <% end %>
      </li>
    <% end %>
  </ul>
<hr>
  <%  if current_user == @team.owner %>
  <%= link_to '編集', edit_team_path(@team.id) %>
  <%= link_to '削除', team_path(@team.id), method: :delete ,data: {confirm: '本当に削除していいですか？'}  %>
  <% end %>
  <%= link_to '作成', new_team_report_path(@team.id) %>
</div>
